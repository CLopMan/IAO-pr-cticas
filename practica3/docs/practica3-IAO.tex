%----------
%   IMPORTANTE
%----------

% Si nunca has utilizado LaTeX es conveniente que aprendas una serie de conceptos básicos antes de utilizar esta plantilla. Te aconsejamos que leas previamente algún tutorial (puedes encontar muchos en Internet).

% Esta plantilla está basada en las recomendaciones de la guía "Trabajo fin de Grado: Escribir el TFG", que encontrarás en http://uc3m.libguides.com/TFG/escribir
% contiene recomendaciones de la Biblioteca basadas principalmente en estilos APA e IEEE, pero debes seguir siempre las orientaciones de tu Tutor de TFG y la normativa de TFG para tu titulación.

% Encontrarás un ejemplo de TFG realizado con esta misma plantilla en la carpeta "_ejemplo_TFG_2019". Consúltalo porque contiene ejemplos útiles para incorporar tablas, figuras, listados de código, bibliografía, etc.


%----------
%    CONFIGURACIÓN DEL DOCUMENTO
%----------

% Definimos las características del documento y añadimos una serie de paquetes (\usepackage{package}) que agregan funcionalidades a LaTeX.

\documentclass[12pt]{report} %fuente a 12pt

% MÁRGENES: 2,5 cm sup. e inf.; 3 cm izdo. y dcho.
\usepackage[
a4paper,
vmargin=2.5cm,
hmargin=3cm
]{geometry}

% INTERLINEADO: Estrecho (6 ptos./interlineado 1,15) o Moderado (6 ptos./interlineado 1,5)
\renewcommand{\baselinestretch}{1.15}
\parskip=6pt

\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}

% DEFINICIÓN DE COLORES para portada y listados de código
\usepackage[table]{xcolor}
\definecolor{azulUC3M}{RGB}{0,0,102}
\definecolor{gray97}{gray}{.97}
\definecolor{gray75}{gray}{.75}
\definecolor{gray45}{gray}{.45}

\usepackage{tikz}
% Soporte para GENERAR PDF/A --es importante de cara a su inclusión en e-Archivo porque es el formato óptimo de preservación y a la generación de metadatos, tal y como se describe en http://uc3m.libguides.com/ld.php?content_id=31389625. En la carpeta incluímos el archivo plantilla_tfg_2017.xmpdata en el que puedes incluir los metadatos que se incorporarán al archivo PDF cuando lo compiles. Ese archivo debe llamarse igual que tu archivo .tex. Puedes ver un ejemplo en esta misma carpeta.
\usepackage[a-1b]{pdfx}

% ENLACES
\usepackage{hyperref}
\hypersetup{colorlinks=true,
    linkcolor=black, % enlaces a partes del documento (p.e. índice) en color negro
    citecolor=black,
    urlcolor=blue} % enlaces a recursos fuera del documento en azul

% EXPRESIONES MATEMATICAS
\usepackage{amsmath,amssymb,amsfonts,amsthm}
\usepackage{booktabs}

\usepackage{txfonts}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}

\usepackage[spanish, es-tabla]{babel}
\usepackage[babel, spanish=spanish]{csquotes}
\AtBeginEnvironment{quote}{\small}

% diseño de PIE DE PÁGINA
\usepackage{fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\headrulewidth}{0pt}
\rfoot{\thepage}
\fancypagestyle{plain}{\pagestyle{fancy}}

% DISEÑO DE LOS TÍTULOS de las partes del trabajo (capítulos y epígrafes o subcapítulos)
\usepackage{titlesec}
\usepackage{titletoc}
\titleformat{\chapter}[block]
{\large\bfseries\filcenter}
{\thechapter.}
{5pt}
{\MakeUppercase}
{}
\titlespacing{\chapter}{0pt}{0pt}{*3}
\titlecontents{chapter}
[0pt]
{}
{\contentsmargin{0pt}\thecontentslabel.\enspace\uppercase}
{\contentsmargin{0pt}\uppercase}
{\titlerule*[.7pc]{.}\contentspage}

\titleformat{\section}
{\bfseries}
{\thesection.}
{5pt}
{}
\titlecontents{section}
[5pt]
{}
{\contentsmargin{0pt}\thecontentslabel.\enspace}
{\contentsmargin{0pt}}
{\titlerule*[.7pc]{.}\contentspage}

\titleformat{\subsection}
{\normalsize\bfseries}
{\thesubsection.}
{5pt}
{}
\titlecontents{subsection}
[10pt]
{}
{\contentsmargin{0pt}
    \thecontentslabel.\enspace}
{\contentsmargin{0pt}}
{\titlerule*[.7pc]{.}\contentspage}


% DISEÑO DE TABLAS. Puedes elegir entre el estilo para ingeniería o para ciencias sociales y humanidades. Por defecto, está activado el estilo de ingeniería. Si deseas utilizar el otro, comenta las líneas del diseño de ingeniería y descomenta las del diseño de ciencias sociales y humanidades
\usepackage{multirow} % permite combinar celdas
\usepackage{caption} % para personalizar el título de tablas y figuras
\usepackage{floatrow} % utilizamos este paquete y sus macros \ttabbox y \ffigbox para alinear los nombres de tablas y figuras de acuerdo con el estilo definido. Para su uso ver archivo de ejemplo
\usepackage{array} % con este paquete podemos definir en la siguiente línea un nuevo tipo de columna para tablas: ancho personalizado y contenido centrado
\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}}
\DeclareCaptionFormat{upper}{#1#2\uppercase{#3}\par}

% Diseño de tabla para ingeniería
\captionsetup[table]{
    format=upper,
    name=TABLA,
    justification=centering,
    labelsep=period,
    width=.75\linewidth,
    labelfont=small,
    font=small,
}

%Diseño de tabla para ciencias sociales y humanidades
%\captionsetup[table]{
%    justification=raggedright,
%    labelsep=period,
%    labelfont=small,
%    singlelinecheck=false,
%    font={small,bf}
%}


% DISEÑO DE FIGURAS. Puedes elegir entre el estilo para ingeniería o para ciencias sociales y humanidades. Por defecto, está activado el estilo de ingeniería. Si deseas utilizar el otro, comenta las líneas del diseño de ingeniería y descomenta las del diseño de ciencias sociales y humanidades
\usepackage{graphicx}
\graphicspath{{img/}} %ruta a la carpeta de imágenes

% Diseño de figuras para ingeniería
\captionsetup[figure]{
    format=hang,
    name=Fig.,
    singlelinecheck=off,
    labelsep=period,
    labelfont=small,
    font=small
}

% Diseño de figuras para ciencias sociales y humanidades
%\captionsetup[figure]{
%    format=hang,
%    name=Figura,
%    singlelinecheck=off,
%    labelsep=period,
%    labelfont=small,
%    font=small
%}


% NOTAS A PIE DE PÁGINA
\usepackage{chngcntr} %para numeración contínua de las notas al pie
\counterwithout{footnote}{chapter}

% LISTADOS DE CÓDIGO
% soporte y estilo para listados de código. Más información en https://es.wikibooks.org/wiki/Manual_de_LaTeX/Listados_de_código/Listados_con_listings
\usepackage{listings}

% definimos un estilo de listings
\lstdefinestyle{estilo}{ frame=Ltb,
    framerule=0pt,
    aboveskip=0.5cm,
    framextopmargin=3pt,
    framexbottommargin=3pt,
    framexleftmargin=0.4cm,
    framesep=0pt,
    rulesep=.4pt,
    backgroundcolor=\color{gray97},
    rulesepcolor=\color{black},
    %
    basicstyle=\ttfamily\footnotesize,
    keywordstyle=\bfseries,
    stringstyle=\ttfamily,
    showstringspaces = false,
    commentstyle=\color{gray45},
    %
    numbers=left,
    numbersep=15pt,
    numberstyle=\tiny,
    numberfirstline = false,
    breaklines=true,
    xleftmargin=\parindent
}

\captionsetup[lstlisting]{font=small, labelsep=period}
% fijamos el estilo a utilizar
\lstset{style=estilo}
\renewcommand{\lstlistingname}{\uppercase{Código}}


%BIBLIOGRAFÍA - PUEDES ELEGIR ENTRE ESTILO IEEE O APA. POR DEFECTO ESTÁ CONFIGURADO IEEE. SI DESEAS USAR APA, COMENTA LAS LÍNEA DE IEEE Y DESCOMENTA LAS DE APA. Si haces cambios en la configuración de la bibliografía y no obtienes los resultados esperados, es recomendable limpiar los archivos auxiliares y volver a compilar en este orden: COMPILAR-BIBLIOGRAFIA-COMPILAR

% Tienes más información sobre cómo generar bibliografía y CONFIGURAR TU EDITOR DE TEXTO para compilar con biber en http://tex.stackexchange.com/questions/154751/biblatex-with-biber-configuring-my-editor-to-avoid-undefined-citations , https://www.overleaf.com/learn/latex/Bibliography_management_in_LaTeX y en http://www.ctan.org/tex-archive/macros/latex/exptl/biblatex-contrib
% También te recomendamos consultar la guía temática de la Biblioteca sobre citas bibliográficas: http://uc3m.libguides.com/guias_tematicas/citas_bibliograficas/inicio

% CONFIGURACIÓN PARA LA BIBLIOGRAFÍA IEEE
\usepackage[backend=biber, style=ieee, isbn=false,sortcites, maxbibnames=5, minbibnames=1]{biblatex} % Configuración para el estilo de citas de IEEE, recomendado para el área de ingeniería. "maxbibnames" indica que a partir de 5 autores trunque la lista en el primero (minbibnames) y añada "et al." tal y como se utiliza en el estilo IEEE.

%CONFIGURACIÓN PARA LA BIBLIOGRAFÍA APA
%\usepackage[style=apa, backend=biber, natbib=true, hyperref=true, uniquelist=false, sortcites]{biblatex}
%\DeclareLanguageMapping{spanish}{spanish-apa}

% Añadimos las siguientes indicaciones para mejorar la adaptación de los estilos en español
\DefineBibliographyStrings{spanish}{%
    andothers = {et\addabbrvspace al\adddot}
}
\DefineBibliographyStrings{spanish}{
    url = {\adddot\space[En línea]\adddot\space Disponible en:}
}
\DefineBibliographyStrings{spanish}{
    urlseen = {Acceso:}
}
\DefineBibliographyStrings{spanish}{
    pages = {pp\adddot},
    page = {p.\adddot}
}

\addbibresource{references.bib} % llama al archivo bibliografia.bib en el que debería estar la bibliografía utilizada


%-------------
%    DOCUMENTO
%-------------

\begin{document}
\pagenumbering{roman} % Se utilizan cifras romanas en la numeración de las páginas previas al cuerpo del trabajo

%----------
%    PORTADA
%----------
\title{Práctica 1}
\author{Álvaro Guerrero Espinosa (100472294)\\
        César López Mantecón (100472092)\\
        Paula Subías Serrano (100472119)\\
        Irene Subías Serrano (100472108)\\}

\makeatletter
\begin{titlepage}
    \begin{sffamily}
    \color{azulUC3M}
    \begin{center}
        \begin{figure}[H] %incluimos el logotipo de la Universidad
            \makebox[\textwidth][c]{\includegraphics[width=16cm]{Portada_Logo.png}}
        \end{figure}
        \vspace{2.5cm}
        \begin{Large}
            Grado en Ingeniería Informática\\
            \@date\\
            \vspace{2cm}
            \textsl{Inteligencia Artificial en las Organizaciones}\\
            \bigskip
        \end{Large}
        {\Huge ``\@title''}\\
        \vspace*{0.5cm}
        \rule{10.5cm}{0.1mm}\\
        \vspace*{0.9cm}
        {\LARGE\@author}
        \vspace*{1cm}
    \end{center}
    \vfill
    \color{black}
    % si nuestro trabajo se va a publicar con una licencia Creative Commons, incluir estas líneas. Es la opción recomendada.
    \includegraphics[width=4.2cm]{creativecommons.png}\\ %incluimos el logotipo de creativecommons
    Esta obra se encuentra sujeta a la licencia Creative Commons \textbf{Reconocimiento - No Comercial - Sin Obra Derivada}
    \end{sffamily}
\end{titlepage}
\makeatother

\newpage %página en blanco o de cortesía
\thispagestyle{empty}
\mbox{}

%----------
%    ÍNDICES
%----------

%--
% Índice general
%-
\tableofcontents
\thispagestyle{fancy}

\newpage % página en blanco o de cortesía
\thispagestyle{empty}
\mbox{}

%--
% Índice de figuras. Si no se incluyen, comenta las líneas siguientes
%-
 \listoffigures
 \thispagestyle{fancy}

 \newpage % página en blanco o de cortesía
 \thispagestyle{empty}
 \mbox{}

%--
% Índice de tablas. Si no se incluyen, comenta las líneas siguientes
%-
\listoftables
 \thispagestyle{fancy}

 \newpage % página en blanco o de cortesía
 \thispagestyle{empty}
 \mbox{}


%----------
%    TRABAJO
%----------
\clearpage
\pagenumbering{arabic} % numeración con múmeros arábigos para el resto de la publicación

    \chapter{Introducción y objetivo}
    \label{chap:intro}
        En este documento se recoge el desarrollo de la prácctica 3 de la
        asignatura \textit{Inteligencia Artificial en las Organizaciones}. El
        objetivo de este proyecto es crear un sistema de puntuación de inmuebles 
        basado en el perfil de un estudiante. Para ello se empleará un sistema de lógica borrosa.

        La creación de las reglas del sistema se centrarán en el perfil de un
        estudiante que busque un piso para vivir en solitario durante sus
        estudios. Se ha elegido este perfil por ser del que se tiene más
        información acerca de sus preferencias y tendencias de compra ya que
        forma parte del colectivo de los investigadores.

        La vivienda en las grandes ciudades españolas presenta un gran problema
        a colectivos vulnerables, entre ellos, los
        estudiantes~\cite{viviendas-precio-inaccesible}. Esto, en combinación
        con la escasa educación financiera de los estudiantes
        españoles~\cite{PISA-2022}, hace de un sistema de recomendación
        centrado en este perfil un elemento útil para faciltar a los
        estudiantes la evaluación de un activo inmobiliario para su alquiler
        durante sus años de estudios.

        Adicionalmente, el uso de lógica borrosa presenta claras ventajas dada
        la naturaleza del problema:
        \begin{itemize}
            \item \textbf{Gestión de incertidumbre y ambigüedad}: a través de las funciones de pertenencia para cada etiqueta los sistemas basados en reglas borrosas son capaces de manejar datos ambigüos o incompletos. Esta es una característica fundamental para el sistema que se pretende construir.

            \item \textbf{Tolerancia a rangos y datos imprecisos}: dado que las variables están fuertemente ligadas a la opinión subjetiva de los usuarios, el uso de lógica borrosa permite que el sistema trabaje con valores como ``caro'' o ``lejos'' y rangos de valores que permiten representar la imprecisión inherente a valores subjetivas. 
            \item \textbf{Flexibilidad}: las reglas de un sistema basado en reglas borrosas permiten ofrecer recomendaciones más realistas y ajustadas al usuario que un sistema que solo aplica umbrales rígidos.

            \item \textbf{Combinación de múltiples criterios}: un sistema basado en lógica borrosa puede utilizar varios criterios (precio, tamaño, número de habitaciones...) a través del concepto de \textit{afinidad} de forma que las recomendaciones sean más realistas e informadas.

        \end{itemize}

        Con todo lo anterior es evidente que un sistema con las características descritas presenta una gran utilidad para el colectivo de estudiantes. Además, el uso de logica borrosa presenta claras ventajas para su desarrollo.

    \chapter{Desarrollo del sistema}
    \label{chap:desarrollo}
        Para esta práctica se va a utilizar el Fuzzy Logic Toolbox de MATLAB para crear un sistema de Mamdani Type1 FIS. Esta herramienta permite la selección
        de variables de entrada y salida así como la definición de reglas difusas de manera sencilla y visual.

    \section{Variables de entrada y salida}
        Se han utilizado las variables de entrada propuestas además de nuevas variables que se consideran que pueden ser importantes en la búsqueda de vivienda
        del perfil seleccionado. Se han usado las siguientes entradas.
        Precio: 
        Tamaño:
        Número de habitaciones:
        Altura:
        Amueblado:
        Ascensor:
        Transporte:

    \section{Definición de reglas difusas}
    En este apartado se describen las reglas establecidas para el sistema. La definición de estas ha venido guiada por el perfil elegido del estudiante, que se 
    considera que tiene un bajo poder adquisitivo y busca un piso relativamente pequeño, cerca de paradas de transporte público y preferiblemente amueblado. 
    Aún con este perfil como el principal se considera un caso secundario en el que el usuario busca un piso de varias habitaciones que pueda compartir, 
    lo cual resulta en algunas reglas adicionales. 

    muchas habitaciones => se puede compartir piso.
    caro => poco recomendable porque el estudiante es pobre
    pequeño y muchas habitaciones => poco recomendable porque se considera que tendrá habitaciones muy pequeñas para un estudiante
    grande y muchas habitaciones => medianamente recomendable porque se puede compartir piso
    medio y medio habitaciones => recomendable porque se puede compartir piso
    alto y sin ascensor => poco recomendable, pero no se ha puesto lo contrario (alto con ascensor) porque no aporta valor
    media altura con ascensor => medianamente recomendable

    \chapter{Listado de propiedades}
    \label{chap:propiedades}

    \begin{table}[H]
        \center
        \begin{tabular}{|c|cccc|}
            \hline
            \textbf{Característica} & \href{https://www.idealista.com/inmueble/106565852/}{Propiedad 1} & \href{https://www.idealista.com/inmueble/97146418/}{Propiedad 2} & \href{https://www.idealista.com/inmueble/104278344/}{Propiedad 3} & \href{https://www.idealista.com/inmueble/106562120/}{Propiedad 4} \\
            \hline
            \hline
            \textbf{Precio (€$/m^2$)}                  & 13.51 & 13.04 & 12.17 & 19.05 \\
            \textbf{Tamaño ($m^2$)}                    & 111   & 92    & 76    & 63    \\
            \textbf{Nº habitaciones}                   & 3     & 2     & 1     & 2     \\
            \textbf{Altura}                            & 2º    & 1º    & 4º    & 1º    \\
            \textbf{Amueblada}                         & 1     & 1     & 1     & 1     \\
            \textbf{Con ascensor}                      & 1     & 1     & 1     & 0     \\
            \textbf{Tiempo a transporte público (min)} & 5     & 10    & 3     & 8     \\
            \hline
        \end{tabular}
        \caption{Listado de propiedades evaluadas - 1}
    \end{table}
    \begin{table}[H]
        \center
        \begin{tabular}{|c|ccc|}
            \hline
            \textbf{Característica} & \href{https://www.idealista.com/inmueble/106559777/}{Propiedad 5} & \href{https://www.idealista.com/inmueble/106224752/}{Propiedad 6} & \href{https://www.idealista.com/inmueble/106137531/}{Propiedad 7} \\
            \hline
            \hline
            \textbf{Precio (€$/m^2$)}                  & 21.57 & 16.84 & 15  \\
            \textbf{Tamaño ($m^2$)}                    & 102   & 95    & 160 \\
            \textbf{Nº habitaciones}                   & 2     & 4     & 4   \\
            \textbf{Altura}                            & 1º    & 2º    & 0º  \\
            \textbf{Amueblada}                         & 1     & 1     & 1   \\
            \textbf{Con ascensor}                      & 1     & 1     & 1   \\
            \textbf{Tiempo a transporte público (min)} & 4     & 1     & 4   \\
            \hline
        \end{tabular}
        \caption{Listado de propiedades evaluadas - 2}
    \end{table}
    \begin{table}[H]
        \center
        \begin{tabular}{|c|ccc|}
            \hline
            \textbf{Característica} & \href{https://www.idealista.com/inmueble/106330042/}{Propiedad 8} & \href{https://www.idealista.com/inmueble/106355273/}{Propiedad 9} & \href{https://www.idealista.com/inmueble/106107441/}{Propiedad 10} \\
            \hline
            \hline
            \textbf{Precio (€$/m^2$)}                  & 18.65 & 14.47 & 10.54 \\
            \textbf{Tamaño ($m^2$)}                    & 48    & 76    & 140   \\
            \textbf{Nº habitaciones}                   & 1     & 2     & 4     \\
            \textbf{Altura}                            & 4º    & 1º    & 1º    \\
            \textbf{Amueblada}                         & 1     & 0     & 1     \\
            \textbf{Con ascensor}                      & 1     & 1     & 1     \\
            \textbf{Tiempo a transporte público (min)} & 5     & 13    & 8     \\
            \hline
        \end{tabular}
        \caption{Listado de propiedades evaluadas - 3}
    \end{table}

    \chapter{Análisis de resultados}
    \label{chap:resultados}

    \chapter{Conclusiones y mejoras}
    \label{chap:conclusion}

    %----------
    %    BIBLIOGRAFÍA
    %----------

    %\nocite{*} % Si quieres que aparezcan en la bibliografía todos los documentos que la componen (también los que no estén citados en el texto) descomenta está lína

    \clearpage

    \phantomsection
    \addcontentsline{toc}{chapter}{Bibliografía}
    \label{chap:bibliography}
    \setquotestyle[english]{british} % Cambiamos el tipo de cita porque en el estilo IEEE se usan las comillas inglesas.
    \printbibliography

    %----------
    %    ANEXOS
    %----------

    % Si tu trabajo incluye anexos, puedes descomentar las siguientes líneas
    %\chapter* {Anexo x}
    %\pagenumbering{gobble} % Las páginas de los anexos no se numeran

\end{document}
